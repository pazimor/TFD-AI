<div class="contain">
  <input class="input" type="text" [placeholder]="label('search')" [(ngModel)]="searchText" />

  <div class="modules-container">
    @if(type === "modules") {
      @if (data_store.modulesResource.isLoading()) {
        <mat-spinner></mat-spinner>
      } @else {
        @for (m of filteredModules(); track m.id) {
          <module [module]="m" (click)="selectModules(m)"></module>
        }
      }
    } @else if (type === "descendants") {
      @for (m of filteredDescendants(); track m.id) {
        <descendant [descendant]="m" (click)="selectDescendant(m)"></descendant>
      }
    } @else if (type === "weapons") {
      @for (m of filteredWeapons(); track m.id) {
        <weapon [weapon]="m" (click)="selectWeapon(m)"></weapon>
      }
    } @else if (type === "reactors") {
      @if (!selectedReactorGroup) {
        @for (g of reactorGroups(); track g[0].id) {
          <reactor [reactor]="g[0]" (click)="chooseReactorGroup(g)"></reactor>
        }
      } @else {
        <button class="back" (click)="backToReactorImages()">{{ label('back') }}</button>
        @for (r of selectedReactorGroup; track r.id) {
          <div class="reactor-option" (click)="selectSubReactor(r)">
            <reactor [reactor]="r"></reactor>
            <div class="stats">
              @for (s of r.base_stat; track s.stat_id) {
                <span>{{ s.stat_id }}: {{ s.stat_value }}</span>
              }
            </div>
          </div>
        }
      }
    } @else if (type === "externals") {
      @for (m of filteredExternals(); track m.id) {
        <external [external]="m" (click)="selectExternal(m)"></external>
      }
    }
  </div>
</div>
